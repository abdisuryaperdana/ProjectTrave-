<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="author" content="Untree.co" />
    <link rel="shortcut icon" href="favicon.png" />

    <meta name="description" content="" />
    <meta name="keywords" content="bootstrap, bootstrap4" />

    <!-- Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <link href="css/tiny-slider.css" rel="stylesheet" />
    <link href="css/styleadmindashboard.css" rel="stylesheet" />
    <script src="js/forminputbooking.js"></script>
    <title>SmutOur Sumatera Utara Tour</title>
  </head>

  <body>
    <!-- Start Header/Navigation -->
    <nav
      class="custom-navbar navbar navbar navbar-expand-md navbar-dark bg-dark"
      arial-label="Furni navigation bar"
    >
      <div class="container">
        <a class="navbar-brand" href="index.html">
          <img src="putihlogowordmark.png" alt="Furni" style="width: 6em" />
        </a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarsFurni"
          aria-controls="navbarsFurni"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsFurni">
          <ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
            <li class="nav-item active">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li><a class="nav-link" href="team.html">Our Team</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Header/Navigation -->

    <!-- Start Hero Section -->
    <div class="boxhero">
      <div class="box">
        <div class="square">
          <div class="square-icon1">
            <div class="icon">
              <i class="fas fa-ticket"></i>
            </div>
          </div>
          <p class="info">Jumlah Booking</p>
          <p class="count" id="count_booked">
            <script>
              const counted_booking = document.getElementById("count_booked");
              let count_booking = 0;

              fetch("http://localhost:8000/booked")
                .then((response) => response.json())
                .then((data_booked) => {
                  // Map the data from the response rows
                  const bookedElements = data_booked.data.map((booked) => {
                    count_booking++;
                  });
                  counted_booking.innerHTML = count_booking;
                });
            </script>
          </p>
        </div>
      </div>
      <div class="box">
        <div class="square">
          <div class="square-icon2">
            <div class="icon">
              <i class="fas fa-city fa-sm"></i>
            </div>
          </div>
          <p class="info">Jumlah Festival</p>
          <p class="count" id="counted_festival">
            <script>
              const counted_fest = document.getElementById("counted_festival");
              let count_fest = 0;

              fetch("http://localhost:8000/festival")
                .then((response) => response.json())
                .then((data_festival) => {
                  // Map the data from the response rows
                  const Elements = data_festival.rows.map((festival) => {
                    count_fest++;
                  });
                  counted_fest.innerHTML = count_fest;
                });
            </script>
          </p>
        </div>
      </div>
      <div class="box">
        <div class="square">
          <div class="square-icon3">
            <div class="icon">
              <i class="fas fa-landmark"></i>
            </div>
          </div>
          <p class="info">Jumlah Pameran</p>
          <p class="count" id="counted_pameran">
            <script>
              const counted_pameran =
                document.getElementById("counted_pameran");
              let count_pameran = 0;

              fetch("http://localhost:8000/pameran")
                .then((response) => response.json())
                .then((data_pameran) => {
                  // Map the data from the response rows
                  const Elements = data_pameran.data.map((pameran) => {
                    count_pameran++;
                  });
                  counted_pameran.innerHTML = count_pameran;
                });
            </script>
          </p>
        </div>
      </div>
    </div>

    <!-- List of Booking -->
    <div class="table-booking">
      <div class="container-list">
        <div class="title-list">List of Booking</div>
        <div class="button-container">
          <button
            class="custom-btn btn-12"
            onclick="openPopupForm('add-booking')"
          >
            <span>Click!</span><span>Tambah Booking</span>
          </button>
          <!-- start pop up add booking -->
          <div id="popup-form-add-booking" class="popup-form">
            <div class="wrapper fadeInDown">
              <span class="close" onclick="closePopupForm('add-booking')"
                >&times;</span
              >
              <div id="formContent">
                <!-- Icon -->
                <div class="fadeIn first">
                  <img
                    src="./images/logo/logowordmark.png"
                    id="icon"
                    alt="User Icon"
                  />
                </div>
                <!-- Tabs Titles -->
                <h5>Tambah Data Booking</h5>
                <!-- Login Form -->
                <form>
                  <input
                    type="text"
                    id="nama"
                    class="fadeIn second"
                    name="nama"
                    placeholder="Nama"
                  />
                  <input
                    type="text"
                    id="nohp"
                    class="fadeIn second"
                    name="no-hp"
                    placeholder="No Handphone"
                  />
                  <input
                    type="text"
                    id="jmlorg"
                    class="fadeIn second"
                    name="jmlorg"
                    placeholder="Jumlah Orang"
                  />
                  <input
                    type="text"
                    id="jadwal"
                    class="fadeIn second"
                    name="hari-tgl"
                    placeholder="Hari/Tanggal"
                  />
                  <input
                    type="text"
                    id="jam"
                    class="fadeIn second"
                    name="jam"
                    placeholder="Jam"
                  />
                  <input
                    type="text"
                    id="kegiatan"
                    class="fadeIn second"
                    name="kegiatan"
                    placeholder="Kegiatan"
                  />
                  <input type="submit" class="fadeIn fourth" value="Submit" />
                </form>
                <!-- add booking -->
                <script>
                  const form = document.querySelector("form");

                  form.addEventListener("submit", async (event) => {
                    event.preventDefault();

                    const nama = document.getElementById("nama").value;
                    const nohp = document.getElementById("nohp").value;
                    const jumlahorang = document.getElementById("jmlorg").value;
                    const jadwal = document.getElementById("jadwal").value;
                    const kegiatan = document.getElementById("kegiatan").value;
                    const jam = document.getElementById("jam").value;

                    const data = {
                      nama,
                      nohp,
                      jumlahorang,
                      jadwal,
                      kegiatan,
                      jam,
                    };

                    const response = await fetch("http://localhost:8000/book", {
                      method: "POST",
                      headers: {
                        "Content-Type": "application/json",
                      },
                      body: JSON.stringify(data),
                    });

                    const result = await response.json();

                    if (result.success) {
                      alert("Terima Kasih, Booking berhasil!");
                      form.reset();
                      window.location.reload();
                    } else {
                      alert("Booking gagal!");
                      form.reset();
                    }
                  });
                </script>
              </div>
            </div>
          </div>
          <!-- end pop up add booking -->
        </div>
      </div>

      <!-- Bordered table start -->
      <section class="section">
        <div class="row" id="table-bordered">
          <div class="col-12">
            <div class="card">
              <div class="card-content">
                <!-- table bordered -->
                <div class="table-responsive">
                  <table class="table table-bordered mb-0">
                    <thead>
                      <tr class="tr-thead">
                        <th class="th-name">NAMA</th>
                        <th class="th-nohp">NOMOR HANDPHONE</th>
                        <th class="th-org">JUMLAH ORANG</th>
                        <th class="th-jam">JAM</th>
                        <th class="th-tgl">HARI/TGL</th>
                        <th class="th-kegiatan">KEGIATAN</th>
                        <th class="th-action">ACTION</th>
                      </tr>
                    </thead>
                    <tbody id="bookingoutput">
                      <script>
                        // Select the HTML element where you want to display the data
                        const bookingContainer =
                          document.getElementById("bookingoutput");
                        // Map the data from the response rows
                        fetch("http://localhost:8000/booked")
                          .then((response) => response.json())
                          .then((data_booked) => {
                            // Map the data from the response rows
                            const bookedElements = data_booked.data.map(
                              (booked) => {
                                return `
                                <tr>
                        <td class="text-bold-500">${booked.nama}</td>
                        <td class="text-td">${booked.nohp}</td>
                        <td class="text-td">${booked.jumlahorang}</td>
                        <td class="text-td">${booked.jam}</td>
                        <td class="text-td">${booked.jadwal}</td>
                        <td class="text-td">${booked.kegiatan}</td>
                        <td>
                          <button class="icon-button" onclick="openPopupForm('edit-booking')">
                            <i
                              class="fa-solid fa-pen-to-square fa-xl"
                              style="color: #399155"
                            ></i>
                          </button>

                          <!-- start pop up edit booking -->
                            <div id="popup-form-edit-booking" class="popup-form">
                              <div class="wrapper fadeInDown">
                                <span class="close" onclick="closePopupForm('edit-booking')">&times;</span>
                                <div id="formContent">
                                  <!-- Icon -->
                                  <div class="fadeIn first">
                                    <img src="./images/logo/logowordmark.png" id="icon" alt="User Icon" />
                                  </div>
                                  <!-- Tabs Titles -->
                                  <h5>Edit Data Booking</h5>
                                  <!-- Login Form -->
                                  <form>
                                    <input type="text" id="nama" class="fadeIn second" name="nama" placeholder="Nama" value="${booked.nama}">
                                    <input type="text" id="no-hp" class="fadeIn second" name="no-hp" placeholder="No Handphone" value="${booked.nohp}">
                                    <input type="text" id="jumlah-orang" class="fadeIn second" name="jumlah-orang" placeholder="Jumlah Orang" value="${booked.jumlahorang}">
                                    <input type="text" id="jam" class="fadeIn second" name="jam" placeholder="Jam" value="${booked.jam}">
                                    <input type="text" id="hari-tgl" class="fadeIn second" name="hari-tgl" placeholder="Hari/Tanggal" value="${booked.jadwal}">
                                    <input type="text" id="kegiatan" class="fadeIn second" name="kegiatan" placeholder="Kegiatan" value="${booked.kegiatan}">
                                    <input type="submit" class="fadeIn fourth" value="Submit" type="button" onclick="submitForm('booking')">
                                  </form>
                                </div>
                              </div>
                            </div>
                          <!-- end pop up edit booking -->

                          <button class="icon-button">
                            <i
                              class="fa-solid fa-trash-can fa-bounce fa-xl"
                              style="color: #8c0e0f"
                            ></i>
                          </button>
                        </td>
                      </tr>
                                `;
                              }
                            );
                            bookingContainer.innerHTML =
                              bookedElements.join("");
                          });
                      </script>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
    <br />
    <!-- End List of Booking -->

    <!-- List of Festival -->
    <div class="table-booking">
      <div class="container-list">
        <div class="title-list">Content of Festival</div>
        <div class="button-container">
          <button
            class="custom-btn btn-12"
            onclick="openPopupForm('add-festival')"
          >
            <span>Click!</span><span>Tambah Festival</span>
          </button>
          <!-- start pop up festival -->
          <div id="popup-form-add-festival" class="popup-form">
            <div class="wrapper fadeInDown">
              <span class="close" onclick="closePopupForm('add-festival')"
                >&times;</span
              >
              <div id="formContent">
                <!-- Icon -->
                <div class="fadeIn first">
                  <img
                    src="./images/logo/logowordmark.png"
                    id="icon"
                    alt="User Icon"
                  />
                </div>
                <!-- Tabs Titles -->
                <h5>Tambah Kegiatan Festival</h5>
                <!-- Login Form -->
                <form>
                  <input
                    type="text"
                    id="nama-kegiatan-festival"
                    class="fadeIn second"
                    name="nama-kegiatan-festival"
                    placeholder="Nama Kegiatan"
                  />
                  <input
                    type="text"
                    id="deskripsi-festival"
                    class="fadeIn second"
                    name="deskripsi-festival"
                    placeholder="Deskripsi"
                  />
                  <input
                    type="text"
                    id="jadwal-festival"
                    class="fadeIn second"
                    name="jadwal-festival"
                    placeholder="Jadwal"
                  />
                  <input
                    type="text"
                    id="lokasi-festival"
                    class="fadeIn second"
                    name="lokasi-festival"
                    placeholder="Lokasi"
                  />
                  <input
                    type="text"
                    id="gmaps-festival"
                    class="fadeIn second"
                    name="gmaps-festival"
                    placeholder="Gmaps"
                  />
                  <label
                    class="fadeIn second sizelabelinput"
                    for="foto-festival"
                    >Unggah Foto Wisata</label
                  >
                  <input
                    type="file"
                    id="foto-festival"
                    class="fadeIn second"
                    name="foto-festival"
                  />
                  <input
                    type="submit"
                    class="fadeIn fourth"
                    value="Submit"
                    type="button"
                    onclick="submitForm('festival')"
                  />
                </form>
              </div>
            </div>
          </div>
          <!-- end pop up festival -->
        </div>
      </div>

      <!-- Bordered table start -->
      <section class="section">
        <div class="row" id="table-bordered">
          <div class="col-12">
            <div class="card">
              <div class="card-content">
                <!-- table bordered -->
                <div class="table-responsive">
                  <table class="table table-bordered mb-0">
                    <thead>
                      <tr class="tr-thead">
                        <th class="th-namafestival">NAMA KEGIATAN</th>
                        <!-- <th class="th-fotofestival">FOTO</th> -->
                        <th class="th-deskfestival">DESKRIPSI</th>
                        <th class="th-jadwalfestival">JADWAL</th>
                        <th class="th-lokasifestival">LOKASI</th>
                        <th class="th-gmaps">GMAPS</th>
                        <th class="th-actionfestival">ACTION</th>
                      </tr>
                    </thead>
                    <tbody id="festoutput">
                      <script>
                        // Select the HTML element where you want to display the data
                        const dataContainer =
                          document.getElementById("festoutput");
                        // Map the data from the response rows
                        fetch("http://localhost:8000/festival")
                          .then((response) => response.json())
                          .then((data_festival) => {
                            // Map the data from the response rows
                            const festivalElements = data_festival.rows.map(
                              (festival) => {
                                return `
                                <tr>
                        <td class="text-bold-500">${festival.nama}</td>

                        <td>
                          ${festival.deskripsi}
                        </td>
                        <td class="text-td">${festival.jadwal}</td>
                        <td class="text-td">${festival.lokasi}</td>
                        <td class="text-td">
                          ${festival.gmaps}
                        </td>
                        <td>
                          <button class="icon-button" onclick="openPopupForm('edit-festival')">
                            <i
                              class="fa-solid fa-pen-to-square fa-xl"
                              style="color: #399155"
                            ></i>
                          </button>

                          <!-- start pop up edit festival -->
                            <div id="popup-form-edit-festival" class="popup-form">
                              <div class="wrapper fadeInDown">
                                <span class="close" onclick="closePopupForm('edit-festival')">&times;</span>
                                <div id="formContent">
                                  <!-- Icon -->
                                  <div class="fadeIn first">
                                    <img src="./images/logo/logowordmark.png" id="icon" alt="User Icon" />
                                  </div>
                                  <!-- Tabs Titles -->
                                  <h5>Edit Data Festival</h5>
                                  <!-- Login Form -->
                                  <form>
                                    <input type="text" id="nama-kegiatan-festival" class="fadeIn second" name="nama-kegiatan-festival" placeholder="Nama Kegiatan" value="${festival.nama}">
                                    <input type="text" id="deskripsi-festival" class="fadeIn second" name="deskripsi-festival" placeholder="Deskripsi" value="${festival.deskripsi}">
                                    <input type="text" id="jadwal-festival" class="fadeIn second" name="jadwal-festival" placeholder="Jadwal" value="${festival.jadwal}">
                                    <input type="text" id="lokasi-festival" class="fadeIn second" name="lokasi-festival" placeholder="Lokasi" value="${festival.lokasi}">
                                    <input type="text" id="gmaps-festival" class="fadeIn second" name="gmaps-festival" placeholder="Gmaps" value="${festival.gmaps}">
                                    <input type="submit" class="fadeIn fourth" value="Submit" type="button" onclick="submitForm('festival')">
                                  </form>
                                </div>
                              </div>
                            </div>
                          <!-- end pop up edit festival -->

                          <button class="icon-button">
                            <i
                              class="fa-solid fa-trash-can fa-bounce fa-xl"
                              style="color: #8c0e0f"
                            ></i>
                          </button>
                        </td>
                      </tr>
                                `;
                              }
                            );
                            dataContainer.innerHTML = festivalElements.join("");
                          });
                      </script>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
    <br />
    <!-- End List of Festival -->

    <!-- List of Pameran -->
    <div class="table-booking mb-4">
      <div class="container-list">
        <div class="title-list">Content of Pameran</div>
        <div class="button-container">
          <button
            class="custom-btn btn-12"
            onclick="openPopupForm('add-pameran')"
          >
            <span>Click!</span><span>Tambah Pameran</span>
          </button>
          <!-- start pop up pameran -->
          <div id="popup-form-add-pameran" class="popup-form">
            <div class="wrapper fadeInDown">
              <span class="close" onclick="closePopupForm('add-pameran')"
                >&times;</span
              >
              <div id="formContent">
                <!-- Icon -->
                <div class="fadeIn first">
                  <img
                    src="./images/logo/logowordmark.png"
                    id="icon"
                    alt="User Icon"
                  />
                </div>
                <!-- Tabs Titles -->
                <h5>Tambah Kegiatan Pameran</h5>
                <!-- Login Form -->
                <form>
                  <input
                    type="text"
                    id="nama"
                    class="fadeIn second"
                    name="nama-kegiatan-pameran"
                    placeholder="Nama Kegiatan"
                  />
                  <input
                    type="text"
                    id="no-hp"
                    class="fadeIn second"
                    name="deskripsi-pameran"
                    placeholder="Deskripsi"
                  />
                  <input
                    type="text"
                    id="jumlah-orang"
                    class="fadeIn second"
                    name="jadwal-pameran"
                    placeholder="Jadwal"
                  />
                  <input
                    type="text"
                    id="hari-tgl"
                    class="fadeIn second"
                    name="lokasi-pameran"
                    placeholder="Lokasi"
                  />
                  <input
                    type="text"
                    id="jam"
                    class="fadeIn second"
                    name="gmaps-pameran"
                    placeholder="Gmaps"
                  />
                  <label class="fadeIn second sizelabelinput" for="foto-pameran"
                    >Unggah Foto Wisata</label
                  >
                  <input
                    type="file"
                    id="foto-pameran"
                    class="fadeIn second"
                    name="foto-pameran"
                  />
                  <input
                    type="submit"
                    class="fadeIn fourth"
                    value="Submit"
                    type="button"
                    onclick="submitForm('pameran')"
                  />
                </form>
              </div>
            </div>
          </div>
          <!-- end pop up pameran -->
        </div>
      </div>

      <!-- Bordered table start -->
      <section class="section">
        <div class="row" id="table-bordered">
          <div class="col-12">
            <div class="card">
              <div class="card-content">
                <!-- table bordered -->
                <div class="table-responsive">
                  <table class="table table-bordered mb-0">
                    <thead>
                      <tr class="tr-thead">
                        <th class="th-namafestival">NAMA KEGIATAN</th>
                        <!-- <th class="th-fotofestival">FOTO</th> -->
                        <th class="th-deskfestival">DESKRIPSI</th>
                        <th class="th-jadwalfestival">JADWAL</th>
                        <th class="th-lokasifestival">LOKASI</th>
                        <th class="th-gmaps">GMAPS</th>
                        <th class="th-actionfestival">ACTION</th>
                      </tr>
                    </thead>
                    <tbody id="pameranOutput">
                      <script>
                        // Select the HTML element where you want to display the data
                        const pameranContainer =
                          document.getElementById("pameranOutput");
                        // Map the data from the response rows
                        fetch("http://localhost:8000/pameran")
                          .then((response) => response.json())
                          .then((data_pameran) => {
                            // Map the data from the response rows
                            const pameranElement = data_pameran.data.map(
                              (pameran) => {
                                return `
                              <tr>
                        <td class="text-bold-500">
                          ${pameran.nama}
                        </td>
                        <td>
                          ${pameran.deskripsi}
                        </td>
                        <td class="text-td">${pameran.jadwal}</td>
                        <td class="text-td">${pameran.lokasi}</td>
                        <td class="text-td">
                          ${pameran.gmaps}
                        </td>
                        <td>
                          <button class="icon-button" onclick="openPopupForm('edit-pameran')">
                            <i
                              class="fa-solid fa-pen-to-square fa-xl"
                              style="color: #399155"
                            ></i>
                          </button>

                          <!-- start pop up edit pameran -->
                            <div id="popup-form-edit-pameran" class="popup-form">
                              <div class="wrapper fadeInDown">
                                <span class="close" onclick="closePopupForm('edit-pameran')">&times;</span>
                                <div id="formContent">
                                  <!-- Icon -->
                                  <div class="fadeIn first">
                                    <img src="./images/logo/logowordmark.png" id="icon" alt="User Icon" />
                                  </div>
                                  <!-- Tabs Titles -->
                                  <h5>Edit Data Pameran</h5>
                                  <!-- Login Form -->
                                  <form>
                                    <input type="text" id="nama-kegiatan-pameran" class="fadeIn second" name="nama-kegiatan-pameran" placeholder="Nama Kegiatan" value="${pameran.nama}">
                                    <input type="text" id="deskripsi-pameran" class="fadeIn second" name="deskripsi-pameran" placeholder="Deskripsi" value="${pameran.deskripsi}">
                                    <input type="text" id="jadwal-pameran" class="fadeIn second" name="jadwal-pameran" placeholder="Jadwal" value="${pameran.jadwal}">
                                    <input type="text" id="lokasi-pameran" class="fadeIn second" name="lokasi-pameran" placeholder="Lokasi" value="${pameran.lokasi}">
                                    <input type="text" id="gmaps-pameran" class="fadeIn second" name="gmaps-pameran" placeholder="Gmaps" value="${pameran.gmaps}">
                                    <input type="submit" class="fadeIn fourth" value="Submit" type="button" onclick="submitForm(pameran)">
                                  </form>
                                </div>
                              </div>
                            </div>
                          <!-- end pop up edit pameran -->

                          <button class="icon-button">
                            <i
                              class="fa-solid fa-trash-can fa-bounce fa-xl"
                              style="color: #8c0e0f"
                            ></i>
                          </button>
                        </td>
                      </tr>
                                `;
                              }
                            );
                            pameranContainer.innerHTML =
                              pameranElement.join("");
                          });
                      </script>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
    <!-- End List of Pameran -->

    <!-- Start Footer Section -->

    <!-- End Footer Section -->

    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/tiny-slider.js"></script>
    <script src="js/custom.js"></script>
  </body>
</html>
